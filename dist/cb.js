let inp;document.body.onload=setTimeout(initializeTheme,100),document.body.onload=()=>{inp=document.querySelector("#cbi"),inp.focus(),inp.oninput=e=>{e.target.style.height="auto",e.target.style.height=`${e.target.scrollHeight}px`}};const ld=document.querySelector(".lb"),ht=document.querySelector("html"),sb=document.querySelector(".sb"),sv=document.querySelector(".sbs"),hb=document.querySelector("#sb-btn"),prj=document.querySelector(".prj"),pd2=document.querySelector(".pd2"),ema=document.querySelector("#ema"),cs=document.querySelector("#cs"),f=document.querySelector(".cbf"),sub=document.querySelector("#sub"),ch=document.querySelector(".cbh"),cd=document.querySelector(".cbd"),cp=document.querySelector(".copy");function two(){"true"===ld.getAttribute("aria-checked")?(localStorage.setItem("dark","off"),ld.setAttribute("aria-checked","false"),ht.removeAttribute("data-theme"),ld.textContent="dark ðŸŒ™",ht.className="bl"):(localStorage.setItem("dark","on"),ld.setAttribute("aria-checked","true"),ht.setAttribute("data-theme","dark"),ld.textContent="light â˜€ï¸",ht.className="bd")}function initializeTheme(){if("on"===localStorage.getItem("dark")){"true"===ld.getAttribute("aria-checked")||(ld.setAttribute("aria-checked","true"),ht.setAttribute("data-theme","dark"),ld.textContent="light â˜€ï¸",ht.className="bd")}else ld.setAttribute("aria-checked","false"),ht.removeAttribute("data-theme"),ld.textContent="dark ðŸŒ™",ht.className="bl"}function toggleDropdown(e,t,o){"true"===e.getAttribute("aria-expanded")?(t.classList.remove(o),e.setAttribute("aria-expanded","false")):(t.classList.add(o),e.setAttribute("aria-expanded","true"))}ld.onclick=two,hb.onclick=()=>{toggleDropdown(hb,sb,"sbb")},pd2.onclick=()=>{toggleDropdown(pd2,prj,"uls")},ecopyma.onclick=()=>{ema.select(),ema.setSelectionRange(0,99999),navigator.clipboard.writeText(ema.value),alert(`${ema.value} has been copied to your clip board`)},document.addEventListener("keydown",e=>{"Escape"===e.key&&sb.classList.contains("sbb")&&toggleDropdown(hb,sb,"sbb"),"Escape"===e.key&&prj.classList.contains("uls")&&toggleDropdown(pd2,prj,"uls")}),document.addEventListener("click",e=>{!sb.classList.contains("sbb")||sb.contains(e.target)||hb.contains(e.target)||toggleDropdown(hb,sb,"sbb"),!prj.classList.contains("uls")||prj.contains(e.target)||pd2.contains(e.target)||toggleDropdown(pd2,prj,"uls")});const nextPageLinks=document.querySelectorAll('a[href]:not([href^="#"]):not([href^="mailto:"])');function reply(e){let t=document.createElement("div");return t.className=e,t}function think(e){let t=document.createElement("div");return t.className=e,t}nextPageLinks.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const o=e.href,n=t.clientX,r=t.clientY;document.documentElement.style.setProperty("--x",`${n}px`),document.documentElement.style.setProperty("--y",`${r}px`),document.startViewTransition?document.startViewTransition(()=>{setTimeout(()=>{window.location.href=o},50)}).finished.finally(()=>{document.documentElement.style.removeProperty("--x"),document.documentElement.style.removeProperty("--y")}):window.location.href=o})}),sub.addEventListener("click",async e=>{e.preventDefault();const t=inp.value.trim();if(!t)return;let o=reply("chat user");o.textContent+=inp.value.trim(),ch.append(o),ch.scrollTop=ch.scrollHeight,inp.value="",inp.style.height="auto",sub.disabled=!0;let n=reply("chat server thinking");n.textContent="responding...",setTimeout(()=>ch.append(n),400);try{const e=await fetch("http://127.0.0.1:3004/gem",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chatbot:t})});if(!e.ok){const t=await e.text();throw new Error(`Server error: ${t}`)}const o=e.body.getReader(),r=new TextDecoder;let c=reply("chat server");for(ch.append(c),n.style.display="none";;){const{done:e,value:t}=await o.read();if(e)break;const n=r.decode(t,{stream:!0});c.textContent+=n,ch.scrollTop=ch.scrollHeight}}catch(e){let t=reply("chat server");n.style.display="none",t.textContent="too many requests, you have exceded your free tier limits",setTimeout(()=>ch.append(t),300)}finally{sub.disabled=!1,inp.focus()}});