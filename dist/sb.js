let inp;document.body.onload=setTimeout(initializeTheme,200),document.body.onload=()=>{inp=document.querySelector("#sbi"),inp.focus(),inp.oninput=e=>{e.target.style.height="auto",e.target.style.height=`${e.target.scrollHeight}px`}};const ht=document.querySelector("html"),sb=document.querySelector(".sb"),sv=document.querySelector(".sbs"),hb=document.querySelector("#sb-btn"),ema=document.querySelector("#ema"),f=document.querySelector(".sbf"),sub=document.querySelector("#sub"),res=document.querySelector(".result");function initializeTheme(){"on"==localStorage.getItem("dark")?(console.log(345),ht.setAttribute("data-theme","dark"),ht.className="bd"):(ht.removeAttribute("data-theme"),ht.className="bl")}function toggleDropdown(e,t,n){"true"===e.getAttribute("aria-expanded")?(t.classList.remove(n),e.setAttribute("aria-expanded","false")):(t.classList.add(n),e.setAttribute("aria-expanded","true"))}hb.onclick=()=>{toggleDropdown(hb,sb,"sbb")},ema.onclick=()=>{ema.select(),ema.setSelectionRange(0,99999),navigator.clipboard.writeText(ema.value),alert("Copied the text: "+ema.value)},document.addEventListener("keydown",e=>{"Escape"===e.key&&sb.classList.contains("sbb")&&toggleDropdown(hb,sb,"sbb"),"Escape"===e.key&&prj.classList.contains("uls")&&toggleDropdown(pd2,prj,"uls")}),document.addEventListener("click",e=>{!sb.classList.contains("sbb")||sb.contains(e.target)||hb.contains(e.target)||toggleDropdown(hb,sb,"sbb")});const nextPageLinks=document.querySelectorAll('a[href]:not([href^="#"]):not([href^="mailto:"])');nextPageLinks.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const n=e.href,o=t.clientX,r=t.clientY;document.documentElement.style.setProperty("--x",`${o}px`),document.documentElement.style.setProperty("--y",`${r}px`),document.startViewTransition?document.startViewTransition(()=>{setTimeout(()=>{window.location.href=n},50)}).finished.finally(()=>{document.documentElement.style.removeProperty("--x"),document.documentElement.style.removeProperty("--y")}):window.location.href=n})}),sub.addEventListener("click",async e=>{e.preventDefault();const t=inp.value.trim();if(t){res.textContent="searching...",sub.disabled=!0;try{const e=await fetch("https://localhost:3004/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t})});if(!e.ok){const t=await e.json();throw new Error(`API Error ${e.status}: ${t.error||e.statusText}`)}reply(await e.json())}catch(e){console.error("Fetch error:",e),alert(`Error: ${e.message} Please ensure your Node.js server and Qdrant database are running.`)}finally{sub.disabled=!1,inp.focus(),res.textContent="find words closest in meaning rather than matching letters"}}});let UL=document.createElement("ul");function reply(e){if(0===e.length)return void(res.textContent="No semantic matches found in the corpus.");let t=document.createElement("li");e.map(e=>{t.textContent=e,t.className=className,UL.append(t)}),res.append(UL)}